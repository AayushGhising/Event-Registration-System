<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Badge</title>
    <style>
      h1 {
        margin-top: 50px;
        margin-bottom: 50px;
        /* text-decoration-color: green; */
        color: rgb(0, 176, 0);
      }
      .container {
        max-width: 600px;
        margin: 50px auto;
        text-align: center;
      }
      iframe {
        width: 100%;
        height: 500px;
        border: none;
      }
      .download-btn {
        display: inline-block;
        margin-top: 10px;
        padding: 10px 20px;
        background-color: #007bff;
        color: #fff;
        text-decoration: none;
        border-radius: 5px;
      }
    </style>
  </head>
  <body>
    <div class="container">
      <h1>You have successfully registered to the event!!!</h1>
      <h2>Your Badge</h2>
      <iframe id="badgeFrame"></iframe>
      <a id="downloadLink" class="download-btn" download>Download Badge</a>
    </div>

    <script>
      async function loadBadge() {
        const urlParams = new URLSearchParams(window.location.search);
        const visitorId = urlParams.get("id");

        if (!visitorId) {
          alert("Invalid badge request!");
          return;
        }

        const badgeUrl = `http://localhost:8080/api/eventRegistrationSystem/downloadBadge/${visitorId}`;

        // Set PDF source in iframe
        document.getElementById("badgeFrame").src = badgeUrl;

        // Set download link
        document.getElementById("downloadLink").href = badgeUrl;
      }

      window.onload = loadBadge;
    </script>
  </body>
</html>
